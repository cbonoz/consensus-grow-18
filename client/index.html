<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="./img/delivery.png">

    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

    <title>AnchorSupply</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
          integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link href="css/product.css" rel="stylesheet">
    <style type="text/css">
        .feature-text {
            margin: 20px;
            padding-top: 20px;
        }
        .center-text, .text-center {
            margin: 20px
        }
    </style>
</head>

<body>

<nav class="navbar navbar-expand-sm navbar-light bg-light">
    <a class="navbar-brand mx-4" href="index.html">
        <img style="max-width:35px;" class="navbar-left" src="img/logo.png">
        <strong>AnchorSupply</strong>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ml-auto">

            <li class="nav-item">
                <a class="nav-link mx-4" href="map.html">Map</a>
            </li>
            <li class="nav-item">
                <a class="nav-link mx-4" href="api.html">API</a>
            </li>
            <li class="nav-item">
                <a class="nav-link mx-4" href="#" data-toggle="modal" data-target="#myModal">Sign Up</a>
            </li>

        </ul>

    </div>
</nav>

<div class="position-relative overflow-hidden d-flex bg-custom p-md-5 text-center bg-light">
    <span id="ThreeJsCanvas" class="invisible viewpoint-fadeInUp-delay2"></span>
    <div class="col-md-5 p-lg-5 mx-auto my-5 invisible viewpoint-fadeInRight">
        <h1 class="display-4 font-weight-normal"><strong>AnchorSupply</strong></h1>
        <p class="lead font-weight-normal text-cyan">A Universal, Intelligent Supply Chain Verification Platform.</p>
        <a class="btn btn-outlined btn-big btn-custom" data-toggle="modal" data-target="#myModal" href="#">Sign up<i
                class="material-icons v-align md-18">arrow_forward</i></a>
    </div>
</div>

<!-- Signup Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <script>
            function validateEmail(email) {
                const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(String(email).toLowerCase());
            }

            function dismissModal() {
                $('#register-modal').modal('hide');
            }

            function handleEmailSuccess(data) {
                dismissModal();
                alert('Thanks for Registering!');
            }

            function handleEmailError(res, textStatus, errorThrown) {
                dismissModal();
                alert("Error registering, you might already be registered.");
            }

            function sendEmailRequest(yourName, yourEmail) {
                console.log('sendEmailRequest');
                const data = {
                    name: yourName,
                    email: yourEmail
                };

//                const url = "http://13.65.170.101:9001";
                const url = "http://localhost:9001";

                $.ajax({
                    url: `${url}/api/register`,
                    type: 'POST',
                    data: JSON.stringify(data),
                    contentType: 'application/json; charset=utf-8',
                    success: handleEmailSuccess,
                    error: handleEmailError
                });
            }

            function validateFormOnSubmit() {
                const yourName = $("#your-name").val();
                const yourEmail = $("#your-email").val();
                console.log('validate form', yourName, yourEmail);

                const nameValid = yourName !== "";
                if (!nameValid) {
                    alert("Name cannot be empty");
                    return false;
                }

                const emailValid = validateEmail(yourEmail);
                if (!emailValid) {
                    alert("Please use a valid email address");
                    return false;
                }

                sendEmailRequest(yourName, yourEmail);
                return false;
            }
        </script>

        <!-- Modal content-->
        <!--https://www.w3schools.com/bootstrap/bootstrap_modal.asp-->
        <div class="modal-content" id="register-modal">
            <div class="modal-header">
                <h4 class="modal-title">Interested?</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>
                    We're looking for partners who are open to trying a pilot with our service for routing as
                    a service.All you need to do is send us an anonymized manifest, and we'll optimize it.
                    Later, you can integrate with our API's for automated upload.
                </p>

                <p>Let's get in touch. Enter your email below.</p>

                <div name="register-form">
                    Your name:<br/>
                    <input type="text" id="your-name" title="Your Name" name="yourName"><br/>
                    Your email:<br/>
                    <input type="email" id="your-email" title="Your Email" name="yourEmail"><br/>
                    <br/>
                    <button type="submit" value="Submit" data-dismiss="modal" onClick="validateFormOnSubmit()">
                        Submit
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<script>

</script>


<!-- Container (Services Section) -->
<div class="container-fluid text-center">
    <h2 class="feature-text"><strong>FEATURES</strong></h2>
    <!-- <h4>What we offer</h4> -->
    <br>
    <div class="row pt-4">
        <div class="col-sm-4 invisible viewpoint-fadeInUp-delay4">
            <i class="material-icons md-custom md-48">phone_iphone</i>
            <h4 class="pt-4 feature-text">Web Dashboard and Search Engine</h4>
            <!-- <p>Lorem ipsum dolor sit amet..</p> -->
        </div>
        <div class="col-sm-4 invisible viewpoint-fadeInUp">
            <i class="material-icons md-custom md-48">location_on</i>
            <h4 class="pt-4 feature-text">Blockchain-backed Delivery Verification</h4>
            <!-- <p>Lorem ipsum dolor sit amet..</p> -->
        </div>
        <div class="col-sm-4 invisible viewpoint-fadeInUp-delay2">
            <i class="material-icons md-custom md-48">code</i>
            <h4 class="pt-4 feature-text">API Integration and Data Feeds</h4>
            <!-- <p>Lorem ipsum dolor sit amet..</p> -->
        </div>
    </div>
</div>

<div class="container-fluid bg-light">
    <div class="row">
        <div class="col-sm-8 text-right invisible viewpoint-fadeInLeft">
            <!-- <i class="material-icons md-custom md-100">timer</i> -->
            <img class="img-fluid" src="img/iphone.png">
        </div>
        <div class="col-sm-4 invisible viewpoint-fadeInUp">
            <h2><strong>Web Dashboard</strong></h2>
            <h4 class="mt-4 pt-4"><strong>TRACK:</strong>
                Inspect the items in flight on any given day. Drill into the route for any particular item,
                and see all of it's deliveries and corresponding proofs - even for partial information.
                <!--Choose to go to multiple rides in the most efficient way possible.-->
            </h4>
            <p class="mt-4 pt-4"><strong>VERIFY:</strong>
                ChainPoint API's automatically verify and add delivery transactions to the Bitcoin blockchain.
                These deliveries can be later checked and audited later - verify whether a delivery record exists or not
                on the main chain.
                <!--The user has the ability to choose to be available or not available to shipment.-->
            </p>
            <button class="btn btn-outlined btn-custom mt-4">Sign into the app <i class="material-icons v-align md-18">arrow_forward</i>
            </button>
        </div>
    </div>
</div>

<!-- Container (About Section) -->
<div class="container-fluid bg-custom invisible viewpoint-fadeInUp">
    <div class="container">
        <h2 class="text-center feature-text"><strong>Track Uploaded Deliveries</strong></h2>
        <img class="img-fluid mt-4 pt-4" src="img/routing_2.png">
    </div>
</div>

<div class="container-fluid bg-light invisible viewpoint-fadeInUp">
    <div class="container mt-4 pt-4">
        <h2 class="text-center feature-text"><strong>API Integration</strong></h2>
        <img class="img-fluid mt-4 pt-4" src="img/api.png">
    </div>
</div>

<!-- <hr> -->

<footer class="container py-4 mt-4">
    <div class="row">
        <div class="col-12 col-md">
          <span class="navbar-brand">
            <img style="max-width:35px; color: black;" class="navbar-left" src="img/logo.png">
            <strong>AnchorSupply</strong>
          </span>
            <span class="d-block mb-3 text-muted">&copy; 2018</span>
        </div>
        <div class="col-6 col-md">
            <h5>Features</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Map routing</a></li>
                <li><a class="text-muted" href="#">API docs</a></li>
                <li><a class="text-muted" href="#">Mobile app</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>Map</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Schedule</a></li>
                <li><a class="text-muted" href="#">Vehicles</a></li>
                <li><a class="text-muted" href="#">Routing</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>API</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Add an item</a></li>
                <li><a class="text-muted" href="#">Record a delivery</a></li>
                <li><a class="text-muted" href="#">Get the history of an item</a></li>
                <li><a class="text-muted" href="#">Optimal schedule</a></li>
            </ul>
        </div>
        <div class="col-6 col-md">
            <h5>About</h5>
            <ul class="list-unstyled text-small">
                <li><a class="text-muted" href="#">Team</a></li>
                <li><a class="text-muted" href="#">Privacy</a></li>
                <li><a class="text-muted" href="#">Terms</a></li>
            </ul>
        </div>
    </div>
</footer>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script
        src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous">
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r69/three.min.js"></script>
<script src="js/animate-viewport.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-viewport-checker/1.8.8/jquery.viewportchecker.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>


<!-- three.js script -->
<script>
    // website accent colors are 50acfd, 02f1ff
    // 3js code goes here
    var scene3d = document.getElementById("ThreeJsCanvas");
    var CANVAS_WIDTH = 500;
    var CANVAS_HEIGHT = 400;

    // SCENE
    var scene_header = new THREE.Scene();

    // CAMERA
    camera_header = new THREE.PerspectiveCamera(75, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 1000);
    camera_header.position.set(0, 0, 150);
    camera_header.lookAt(scene_header.position);

    // RENDERER
    // transparent div background color
    var renderer_header = new THREE.WebGLRenderer({alpha: true});
    renderer_header.setClearColor(0x000000, 0);
    renderer_header.setSize(CANVAS_WIDTH, CANVAS_HEIGHT);

    // GEOMETRY & MATERIALS
    // outlined sphere
    var geometry_sphere = new THREE.SphereGeometry(80, 15, 15);
    var material_phong_outlined = new THREE.MeshPhongMaterial({
        color: 0x000000,
        wireframeLinewidth: 3,
        shininess: 30,
        specular: 0x111111,
        wireframe: true
    });
    var sphere_outlined = new THREE.Mesh(geometry_sphere, material_phong_outlined);
    scene_header.add(sphere_outlined);
    sphere_outlined.castShadow = true;
    sphere_outlined.receiveShadow = true;
    // outlined sphere ends

    // materials
    var lambertMaterial = new THREE.MeshLambertMaterial({
        opacity: 0.5,
        color: 0x50acfd
    });
    lambertMaterial.transparent = true;

    var color = new THREE.Color("#50acfd");
    var material_phong_shiny = new THREE.MeshPhongMaterial({
        color: color.getHex(),
        // opacity: 0.9,
        specular: 0xffffff,
        shinyness: 100
    });

    //torus
    var geometry_torus = new THREE.TorusKnotGeometry(35, 4, 100, 10);

    var torus_mesh = new THREE.Mesh(geometry_torus, lambertMaterial);
    var torus_mesh_outline = new THREE.Mesh(geometry_torus, material_phong_outlined);

    scene_header.add(torus_mesh);
    scene_header.add(torus_mesh_outline);

    //LOCATION ICONS
    location_icon_PivotPoint = new THREE.Object3D();
    location_icon_PivotPoint.position.set(0, 0, 0);

    var location_icon_geometry_logo = new THREE.BoxGeometry(30, 30, 0);
    var location_icon_geometry = new THREE.BoxGeometry(20, 32, 0);
    //   var location_icon_material = new THREE.MeshBasicMaterial( {color: 0x8d8d8d} ); //test material of plain color
    THREE.ImageUtils.crossOrigin = '';
    // var location_icon_image = THREE.ImageUtils.loadTexture( 'http://oi67.tinypic.com/6fql9h.jpg' );
    // var location_icon_image = THREE.ImageUtils.loadTexture( 'http://i.imgur.com/j7dzU42.jpg' );
    var location_icon_image_logo = THREE.ImageUtils.loadTexture('https://i.imgur.com/tu52RXt.png');
    var location_icon_image = THREE.ImageUtils.loadTexture('https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Map_marker.svg/1000px-Map_marker.svg.png');

    var location_icon_imageMaterial_logo = new THREE.MeshBasicMaterial({
        map: location_icon_image_logo,
        opacity: 0.75
    });
    var location_icon_imageMaterial = new THREE.MeshBasicMaterial({
        map: location_icon_image,
        opacity: 0.75
    });
    location_icon_imageMaterial_logo.transparent = true;
    location_icon_imageMaterial.transparent = true;

    //NOTE: tiling of images in textures only functions if image dimensions are powers of two
    //for examples: (2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, ...)
    location_icon_image_logo.wrapS = location_icon_image_logo.wrapT = THREE.RepeatWrapping;
    var location_icon_Mesh_logo = new THREE.Mesh(location_icon_geometry_logo, location_icon_imageMaterial_logo);

    location_icon_image.wrapS = location_icon_image.wrapT = THREE.RepeatWrapping;
    var location_icon_Mesh = new THREE.Mesh(location_icon_geometry, location_icon_imageMaterial);
    var location_icon_Mesh2 = new THREE.Mesh(location_icon_geometry, location_icon_imageMaterial);
    var location_icon_Mesh3 = new THREE.Mesh(location_icon_geometry, location_icon_imageMaterial);

    scene_header.add(location_icon_Mesh_logo);
    scene_header.add(location_icon_Mesh);
    scene_header.add(location_icon_Mesh2);
    scene_header.add(location_icon_Mesh3);

    location_icon_PivotPoint.add(location_icon_Mesh);
    location_icon_PivotPoint.add(location_icon_Mesh2);
    location_icon_PivotPoint.add(location_icon_Mesh3);
    scene_header.add(location_icon_PivotPoint);

    // location_icon_Mesh_logo.position.z = 60;
    // location_icon_Mesh_logo.position.x = 60;
    // location_icon_Mesh_logo.rotation.y = Math.PI/2;

    location_icon_Mesh.position.z = 60;
    location_icon_Mesh.position.x = 60;
    location_icon_Mesh.rotation.y = Math.PI / 3;

    location_icon_Mesh2.position.z = -60;
    location_icon_Mesh2.position.x = 60;
    location_icon_Mesh2.position.x = -20;
    // location_icon_Mesh2.rotation.y = -Math.PI/2;

    location_icon_Mesh3.position.z = 60;
    location_icon_Mesh3.position.x = -60;
    location_icon_Mesh3.rotation.y = -Math.PI / 3;
    //location icons end----------------------------

    //CIRCULAR FLOOR
    //Create a ground for shape to hover over
    // var groundGeometry = new THREE.PlaneBufferGeometry(50, 50);
    var groundGeometry = new THREE.CircleGeometry(7, 50);
    var texture_ground = new THREE.MeshPhongMaterial({
        color: 0x50acfd,
        opacity: 0.8,
        specular: 0xffffff,
        shinyness: 20,
        side: THREE.DoubleSide
    });

    var ground = new THREE.Mesh(groundGeometry, texture_ground);
    ground.rotation.x = -Math.PI / 2;
    ground.position.set(0, -55, 0); // (0, -105, 0) to go below the outlined sphere
    ground.receiveShadow = true;
    scene_header.add(ground);

    // brighter lights
    var ambientLight = new THREE.AmbientLight(0x50acfd);
    scene_header.add(ambientLight);

    var lights_header = [];
    lights_header[0] = new THREE.PointLight(0xe90269, 1, 0);
    lights_header[1] = new THREE.PointLight(0xe90269, 1, 0);
    lights_header[2] = new THREE.PointLight(0x02f1ff, 1, 0);

    lights_header[0].position.set(0, 200, 0);
    lights_header[1].position.set(100, 200, 100);
    lights_header[2].position.set(-100, -200, -100);

    scene_header.add(lights_header[0]);
    scene_header.add(lights_header[1]);
    scene_header.add(lights_header[2]);

    // light cast shadows
    lights_header[0].castShadow = true;
    lights_header[1].castShadow = true;
    lights_header[2].castShadow = true;

    // FINISH SCENE SETUP
    // document.body.appendChild(scene3d.domElement);
    ThreeJsCanvas.appendChild(renderer_header.domElement);
    // renderer.render(scene, camera);
    var steps = 0;
    var render = function () {
        steps += 0.07;
        requestAnimationFrame(render);
        sphere_outlined.rotation.y += 0.004;

        torus_mesh_outline.rotation.y -= 0.01;
        torus_mesh.rotation.y -= 0.01;

        torus_mesh_outline.rotation.z -= 0.001;
        torus_mesh.rotation.z -= 0.001;

        torus_mesh_outline.position.y = 5 + (1.7 * (Math.cos(steps)));
        torus_mesh.position.y = 5 + (1.7 * (Math.cos(steps)));

        location_icon_PivotPoint.rotation.y += 0.004; //rotates around center
        // location_icon_PivotPoint.rotation.x += 0.03;

        // location_icon_Mesh.rotation.y += 0.01;

        // location_icon_Mesh_logo.rotation.x -= 0.009;
        // location_icon_Mesh_logo.rotation.y -= 0.009;
        // location_icon_Mesh_logo.rotation.z -= 0.009;
        location_icon_Mesh_logo.position.y = (2 * (Math.cos(steps)));

        renderer_header.render(scene_header, camera_header);
    };
    render();
</script>
</body>
</html>
